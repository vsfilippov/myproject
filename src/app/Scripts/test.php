<?php

$json = '{"Results":[{"Result":{"IsDB":"True","Spend":88,"Paths":[{"Technologies":[{"IsPremium":"no","Name":"Viewport Meta","Description":"This page uses the viewport meta tag which means the content may be optimized for mobile content.","Link":"https://developers.google.com/speed/docs/insights/ConfigureViewport","Tag":"mobile","FirstDetected":1543791600000,"LastDetected":1630566000000},{"IsPremium":"no","Name":"IPhone / Mobile Compatible","Description":"The website contains code that allows the page to support IPhone / Mobile Content.","Link":"http://apple.com","Tag":"mobile","FirstDetected":1543791600000,"LastDetected":1630566000000},{"IsPremium":"no","Name":"Pingback Support","Description":"A Pingback is one of three types of Linkbacks, methods for Web authors to request notification when somebody links to one of their documents.","Link":"http://en.wikipedia.org/wiki/Pingback","Tag":"feeds","FirstDetected":1543791600000,"LastDetected":1630566000000},{"IsPremium":"no","Name":"RSS","Description":"A family of web feed formats used to publish frequently updated content such as blog entries, news headlines or podcasts.","Link":"http://en.wikipedia.org/wiki/RSS_(file_format)","Tag":"feeds","FirstDetected":1543791600000,"LastDetected":1630566000000},{"Categories":["WordPress Plugins"],"IsPremium":"no","Name":"Yoast Plugins","Description":"SEO based plugins from Yoast.","Link":"http://yoast.com/wordpress/seo/","Tag":"widgets","FirstDetected":1543791600000,"LastDetected":1630566000000},{"Parent":"Yoast WordPress SEO Plugin","Categories":["WordPress Plugins"],"IsPremium":"yes","Name":"Yoast SEO Premium","Description":"Premium version of the Yoast WordPress Plugin.","Link":"https://yoast.com/wordpress/plugins/seo-premium/","Tag":"widgets","FirstDetected":1543791600000,"LastDetected":1630566000000},{"Parent":"Yoast Plugins","Categories":["WordPress Plugins"],"IsPremium":"no","Name":"Yoast WordPress SEO Plugin","Description":"Functionality that helps you optimize your pages content, images titles, meta descriptions and more.","Link":"https://yoast.com/wordpress/plugins/seo/","Tag":"widgets","FirstDetected":1543791600000,"LastDetected":1630566000000},{"Categories":["Site Search"],"IsPremium":"no","Name":"Sitelinks Search Box","Description":"With Google sitelinks search box, people can reach your content more quickly from search results.","Link":"https://developers.google.com/webmasters/richsnippets/sitelinkssearch?utm_source=wmc-blog\u0026utm_medium=direct-referral\u0026utm_campaign=sitelinks-searchbox","Tag":"widgets","FirstDetected":1543791600000,"LastDetected":1630566000000},{"Categories":["Fonts"],"IsPremium":"no","Name":"Google Font API","Description":"The Google Font API helps you add web fonts to any web page.","Link":"https://fonts.google.com","Tag":"widgets","FirstDetected":1543791600000,"LastDetected":1630566000000},{"Categories":["Open Source","Blog"],"IsPremium":"no","Name":"WordPress","Description":"WordPress is a state-of-the-art semantic personal publishing platform with a focus on aesthetics, web standards, and usability.","Link":"http://wordpress.org","Tag":"cms","FirstDetected":1543791600000,"LastDetected":1630566000000},{"IsPremium":"no","Name":"Wordpress Plugins","Description":"Plugins are tools to extend the functionality of WordPress. The website uses various plugins from WordPress to provide additional functionality. Some of them may be listed here.","Link":"http://codex.wordpress.org/Plugins","Tag":"widgets","FirstDetected":1543791600000,"LastDetected":1630566000000},{"Categories":["Feedback Forms and Surveys"],"IsPremium":"no","Name":"Contact Form 7","Description":"Specifically designed for wordpress blogs. Contact Form 7 can manage multiple contact forms, plus you can customize the form and the mail contents flexibly with simple markup.","Link":"http://wordpress.org/extend/plugins/contact-form-7/","Tag":"widgets","FirstDetected":1543791600000,"LastDetected":1630566000000},{"Categories":["WordPress Plugins"],"IsPremium":"no","Name":"Slider Revolution","Description":"A response sliding image plugin.","Link":"http://codecanyon.net/item/slider-revolution-responsive-wordpress-plugin/2751380?ref=garazy","Tag":"widgets","FirstDetected":1543791600000,"LastDetected":1548025200000},{"Parent":"WooCommerce","Categories":["WordPress Plugins","WooCommerce Extension"],"IsPremium":"no","Name":"YITH WooCommerce Wishlist","Description":"Wishlist feature for WooCommerce WordPress sites.","Link":"https://wordpress.org/plugins/yith-woocommerce-wishlist/","Tag":"shop","FirstDetected":1543791600000,"LastDetected":1630566000000},{"Parent":"jQuery","Categories":["JavaScript Library"],"IsPremium":"no","Name":"jQuery","Description":"JQuery is a fast, concise, JavaScript Library that simplifies how you traverse HTML documents, handle events, perform animations, and add Ajax interactions to your web pages. jQuery is designed to change the way that you write JavaScript.","Link":"http://jquery.com","Tag":"javascript","FirstDetected":1543791600000,"LastDetected":1630566000000},{"Categories":["WordPress Plugins"],"IsPremium":"no","Name":"Visual Composer","Description":"Visual Composer page builder plugin for WordPress – take full control over your site. Build any layout you can imagine with a drag and drop editor.","Link":"https://visualcomposer.com/","Tag":"widgets","FirstDetected":1543791600000,"LastDetected":1630566000000},{"IsPremium":"no","Name":"Fancybox","Description":"FancyBox is a tool for displaying images, html content and multi-media in a Mac-style \"lightbox\" that floats overtop of web page. ","Link":"http://fancybox.net/","Tag":"javascript","FirstDetected":1543791600000,"LastDetected":1630566000000},{"IsPremium":"no","Name":"ThemePunch","Description":"Using custom plugins/themes from ThemePunch.","Link":"http://www.themepunch.com","Tag":"widgets","FirstDetected":1543791600000,"LastDetected":1548025200000},{"Parent":"jQuery","IsPremium":"no","Name":"jQuery BlockUI","Description":"jQuery BlockUI Plugin lets you simulate synchronous behavior when using AJAX, without locking the browser.","Link":"http://jquery.malsup.com/block/","Tag":"javascript","FirstDetected":1543791600000,"LastDetected":1630566000000},{"Categories":["Compatibility"],"IsPremium":"no","Name":"Modernizr","Description":"Modernizr allows you to target specific browser functionality in your stylesheet.","Link":"http://www.modernizr.com","Tag":"javascript","FirstDetected":1543791600000,"LastDetected":1547766000000},{"Parent":"Modernizr","IsPremium":"no","Name":"Modernizr 2.6","Description":"Modernizr version 2.6.*","Link":"http://modernizr.com/news/modernizr-260/","Tag":"javascript","FirstDetected":1543791600000,"LastDetected":1547766000000},{"IsPremium":"no","Name":"Really Simple Discovery","Description":"Really Simple Discovery is a way to help client software find the services needed to read, edit, or \"work with\" weblogging software.","Link":"http://cyber.law.harvard.edu/blogs/gems/tech/rsd.html","Tag":"feeds","FirstDetected":1543791600000,"LastDetected":1630566000000},{"IsPremium":"no","Name":"Live Writer Support","Description":"Windows Live Writer Tagging Support Schema","Link":"http://windowslivewriter.spaces.live.com","Tag":"feeds","FirstDetected":1543791600000,"LastDetected":1630566000000},{"Parent":"WordPress","IsPremium":"no","Name":"Wordpress 4.9","Description":"WordPress version 4.9.*","Link":"http://codex.wordpress.org/Version_4.9","Tag":"cms","FirstDetected":1543791600000,"LastDetected":1543791600000},{"Categories":["Non Platform"],"IsPremium":"no","Name":"WooCommerce","Description":"Transforms your WordPress website into an online store.","Link":"https://woocommerce.com","Tag":"shop","FirstDetected":1543791600000,"LastDetected":1630566000000},{"IsPremium":"no","Name":"Apple Mobile Web Clips Icon","Description":"This page contains an icon for iPhone, iPad and iTouch devices.","Link":"http://developer.apple.com/library/iOS/#documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html","Tag":"mobile","FirstDetected":1543791600000,"LastDetected":1630566000000},{"Parent":"jQuery","Categories":["jQuery Plugin"],"IsPremium":"no","Name":"jQuery Colorbox","Description":"A light-weight, customizable lightbox plugin for jQuery.","Link":"http://colorpowered.com/colorbox/","Tag":"javascript","FirstDetected":1543791600000,"LastDetected":1630566000000},{"Parent":"jQuery","Categories":["jQuery Plugin"],"IsPremium":"no","Name":"jQuery prettyPhoto","Description":"prettyPhoto is a jQuery lightbox clone which supports additional meta types such as video.","Link":"http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/","Tag":"javascript","FirstDetected":1543791600000,"LastDetected":1630566000000},{"Parent":"jQuery","Categories":["jQuery Plugin"],"IsPremium":"no","Name":"jQuery Cookie","Description":"A simple, lightweight jQuery plugin for reading, writing and deleting cookies.","Link":"https://github.com/carhartl/jquery-cookie","Tag":"javascript","FirstDetected":1543791600000,"LastDetected":1588978800000},{"Categories":["Animation"],"IsPremium":"no","Name":"Slick JS","Description":"Fully responsive carousel library.","Link":"http://kenwheeler.github.io/slick","Tag":"javascript","FirstDetected":1543791600000,"LastDetected":1630566000000},{"Parent":"jQuery","Categories":["jQuery Plugin"],"IsPremium":"no","Name":"jQuery Countdown","Description":"A jQuery plugin that sets a div or span to show a countdown to a given time.","Link":"http://keith-wood.name/countdown.html","Tag":"javascript","FirstDetected":1543791600000,"LastDetected":1630566000000},{"IsPremium":"no","Name":"Underscore.js","Description":"Underscore is a utility-belt library for JavaScript that provides functional programming support.","Link":"http://documentcloud.github.com/underscore/","Tag":"javascript","FirstDetected":1543791600000,"LastDetected":1547766000000},{"IsPremium":"no","Name":"nginx","Description":"nginx [engine x] is a HTTP server and mail proxy server written by Igor Sysoev.","Link":"http://nginx.net/","Tag":"Web Server","FirstDetected":1543791600000,"LastDetected":1630566000000},{"IsPremium":"no","Name":"PHP","Description":"PHP is a widely used general-purpose scripting language that is especially suited for Web development and can be embedded into HTML.","Link":"http://www.php.net","Tag":"framework","FirstDetected":1543791600000,"LastDetected":1606464000000},{"Parent":"PHP","IsPremium":"no","Name":"PHP 7","Description":"Version 7 of the PHP framework.","Link":"http://php.net/","Tag":"framework","FirstDetected":1543791600000,"LastDetected":1630566000000},{"IsPremium":"no","Name":"SSL by Default","Description":"The website redirects traffic to an HTTPS/SSL version by default.","Link":"http://trends.builtwith.com/ssl","Tag":"ssl","FirstDetected":1543791600000,"LastDetected":1630566000000},{"Parent":"WordPress","IsPremium":"no","Name":"Wordpress 5.0","Description":"Wordpress version 5.0.*","Link":"https://make.wordpress.org/core/5-0/","Tag":"cms","FirstDetected":1544396400000,"LastDetected":1597302000000},{"Categories":["Currency"],"IsPremium":"no","Name":"Pound Sterling","Description":"The website uses the £ symbol on its website - meaning it may accept payment in this British currency.","Link":"https://en.wikipedia.org/wiki/Pound_sign","Tag":"payment","FirstDetected":1544396400000,"LastDetected":1630566000000},{"Categories":["Currency"],"IsPremium":"no","Name":"Japanese Yen","Description":"The website uses the ¥ symbol on its website - meaning it may accept payment in this Japanese currency.","Link":"https://en.wikipedia.org/wiki/Japanese_yen","Tag":"payment","FirstDetected":1544396400000,"LastDetected":1579129200000},{"Categories":["Fonts"],"IsPremium":"no","Name":"Font Awesome","Description":"Iconic font and CSS toolkit.","Link":"http://fontawesome.io","Tag":"widgets","FirstDetected":1547766000000,"LastDetected":1630566000000},{"IsPremium":"no","Name":"Russian","Description":"Website content is written in Russian.","Link":"http://ru.wikipedia.org","Tag":"language","FirstDetected":1548025200000,"LastDetected":1630566000000},{"Parent":"WooCommerce","Categories":["Non Platform"],"IsPremium":"no","Name":"WooCommerce Add To Cart","Description":"A WooCommerce store with an \u0027add to cart\u0027 button means it\u0027s more likely to be an actual eCommerce store.","Link":"https://woocommerce.com","Tag":"shop","FirstDetected":1548025200000,"LastDetected":1630566000000},{"Categories":["Compatibility"],"IsPremium":"no","Name":"Respond","Description":"A fast \u0026 lightweight polyfill for min/max-width CSS3 Media Queries (for IE 6-8, and more)","Link":"https://github.com/scottjehl/Respond","Tag":"javascript","FirstDetected":1548025200000,"LastDetected":1630566000000},{"IsPremium":"no","Name":"SPF","Description":"The Sender Policy Framework is an open standard specifying a technical method to prevent sender address forgery.","Link":"http://www.openspf.org/","Tag":"mx","FirstDetected":1551135600000,"LastDetected":1630566000000},{"Categories":["Call Tracking"],"IsPremium":"yes","Name":"Leadback","Description":"Russian based call conversion application.","Link":"http://leadback.ru","Tag":"analytics","FirstDetected":1555542000000,"LastDetected":1630566000000},{"Categories":["Audience Measurement","Conversion Optimization"],"IsPremium":"no","Name":"Yandex Metrika","Description":"A free Russian tool for increasing the conversion of the site. Watch for key performance site, analyze visitor behavior, evaluate the impact of advertising campaigns.","Link":"http://metrika.yandex.ru/","Tag":"analytics","FirstDetected":1555542000000,"LastDetected":1630566000000},{"Categories":["WordPress Plugins"],"IsPremium":"maybe","Name":"WPBakery","Description":"WordPress Page Builder plugin.","Link":"https://wpbakery.com","Tag":"widgets","FirstDetected":1572994800000,"LastDetected":1630566000000},{"IsPremium":"no","Name":"Beget DNS","Description":"DNS hosting from Beget.","Link":"https://beget.com","Tag":"ns","FirstDetected":1576710000000,"LastDetected":1630566000000},{"Categories":["Open Source","Plugin / Module"],"IsPremium":"no","Name":"WooCommerce Checkout","Description":"A WooCommerce website that has a checkout page.","Link":"http://woocommerce.com","Tag":"shop","FirstDetected":1588978800000,"LastDetected":1588978800000},{"IsPremium":"no","Name":"Select2","Description":"jQuery replacement for select boxes","Link":"https://select2.github.io/","Tag":"javascript","FirstDetected":1588978800000,"LastDetected":1588978800000},{"IsPremium":"no","Name":"Almond","Description":"A replacement AMD loader for RequireJS.","Link":"https://github.com/requirejs/almond","Tag":"javascript","FirstDetected":1588978800000,"LastDetected":1588978800000},{"Categories":["Payment Acceptance"],"IsPremium":"no","Name":"Visa","Description":"The website accepts payments with Visa.","Link":"http://visa.com","Tag":"payment","FirstDetected":1588978800000,"LastDetected":1630566000000},{"Categories":["Live Chat"],"IsPremium":"maybe","Name":"Cloudim","Description":"Russian based live chat software to try and help increase online sales.","Link":"http://cloudim.ru","Tag":"widgets","FirstDetected":1588978800000,"LastDetected":1588978800000},{"Categories":["Application Performance","Audience Measurement","Visitor Count Tracking"],"IsPremium":"no","Name":"Google Analytics","Description":"Google Analytics offers a host of compelling features and benefits for everyone from senior executives and advertising and marketing professionals to site owners and content developers.","Link":"http://google.com/analytics","Tag":"analytics","FirstDetected":1588978800000,"LastDetected":1588978800000},{"Parent":"Google Analytics","IsPremium":"no","Name":"Google Universal Analytics","Description":"The analytics.js JavaScript snippet is a new way to measure how users interact with your website. It is similar to the previous Google tracking code, ga.js, but offers more flexibility for developers to customize their implementations.","Link":"https://developers.google.com/analytics/devguides/collection/analyticsjs/","Tag":"analytics","FirstDetected":1588978800000,"LastDetected":1588978800000},{"IsPremium":"no","Name":"Twemoji","Description":"Twitter Emoji for Everyone","Link":"https://github.com/twitter/twemoji","Tag":"widgets","FirstDetected":1588978800000,"LastDetected":1588978800000},{"Categories":["Root Authority"],"IsPremium":"no","Name":"LetsEncrypt","Description":"Let’s Encrypt is a free open Certificate Authority.","Link":"https://letsencrypt.org","Tag":"ssl","FirstDetected":1588978800000,"LastDetected":1630566000000},{"Parent":"WooCommerce","IsPremium":"no","Name":"WooCommerce 3.5","Description":"WooCommerce version 3.5.*","Link":"http://woocommerce.com","Tag":"shop","FirstDetected":1591138800000,"LastDetected":1597302000000},{"IsPremium":"no","Name":"Some Robots Disallow","Description":"Blocks some but not all robots from indexing the website.","Link":"https://robotstxt.org","Tag":"robots","FirstDetected":1594249200000,"LastDetected":1630566000000},{"Parent":"WordPress","IsPremium":"no","Name":"WordPress 5.5","Description":"WordPress version 5.5.*","Link":"http://codex.wordpress.org/Version_5.5","Tag":"cms","FirstDetected":1600383600000,"LastDetected":1606464000000},{"Parent":"WordPress","IsPremium":"no","Name":"WordPress 5.6","Description":"WordPress version 5.6.*","Link":"http://codex.wordpress.org/Version_5.6","Tag":"cms","FirstDetected":1614326400000,"LastDetected":1630566000000},{"Parent":"WooCommerce","IsPremium":"no","Name":"WooCommerce 4.4","Description":"WooCommerce version 4.4.*","Link":"http://woocommerce.com","Tag":"shop","FirstDetected":1624690800000,"LastDetected":1630566000000}],"FirstIndexed":1543791600000,"LastIndexed":1630566000000,"Domain":"evilars.ru","Url":"","SubDomain":""},{"Technologies":[{"Categories":["Currency"],"IsPremium":"no","Name":"Euro","Description":"The website uses the € symbol on its website - meaning it may accept payment in Euros.","Link":"https://en.wikipedia.org/wiki/Euro","Tag":"payment","FirstDetected":1624690800000,"LastDetected":1630566000000}],"FirstIndexed":1624690800000,"LastIndexed":1630566000000,"Domain":"evilars.ru","Url":"dd","SubDomain":""}]},"Meta":{"Majestic":0,"Umbrella":0,"Vertical":"Art And Entertainment","Social":null,"CompanyName":"","Telephones":[],"Emails":["info@evilars.ru"],"City":null,"State":null,"Postcode":null,"Country":"","Names":null,"ARank":100000001,"QRank":-1},"Attributes":{"MJRank":0,"MJTLDRank":0,"RefSN":0,"RefIP":0,"Followers":0,"Sitemap":0,"GTMTags":0,"QubitTags":0,"TealiumTags":0,"AdobeTags":0,"CDimensions":0,"CGoals":0,"CMetrics":0,"ProductCount":0},"FirstIndexed":1543791600000,"LastIndexed":1630566000000,"Lookup":"evilars.ru","SalesRevenue":5326}],"Errors":[]}';
$result = json_decode($json, true);
$technologies = $result['Results'][0]['Result']['Paths'][0]['Technologies'];
var_dump($technologies);


$domains = [''];

$urlPattern = 'https://api.builtwith.com/v19/api.json?KEY=needtoken&LOOKUP=%s';
$finalDomains = [];
foreach ($domains as $key => $domain) {
    $endUrl = sprintf($urlPattern, $domain);
    $response = file_get_contents($endUrl);
    $json = json_decode($response, true);
    if (!isset($json['Results'][0]['Result']['Paths'][0]['Technologies'])) {
        continue;
    }
    $technologies = $json['Results'][0]['Result']['Paths'][0]['Technologies'];
    foreach ($technologies as $technology) {
        if ($technology['Name'] === 'WordPress') {
            $finalDomains [] = $domain;
            break;
        }
    }
}

$fp = fopen('file.csv', 'w');

foreach ($finalDomains as $fields) {
    fputcsv($fp, [$fields]);
}

fclose($fp);